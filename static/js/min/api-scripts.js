function drawBarChart(e,t){e=e.slice(1,11);var n=function(e){return e.term},r=function(e){return e.count},a={top:20,right:5,bottom:0,left:3},o=270-a.left-a.right,i=30,s=d3.select(t),c=function(){s.selectAll("g").remove()},u=function(){s=d3.select(t).attr("width",o+a.right+a.left).attr("height",i*e.length+a.top).append("g").attr("transform","translate("+a.left+","+a.top+")");var c=d3.scale.linear().domain([0,d3.max(e,function(e){return r(e)})]).rangeRound([0,o]),u=s.selectAll("g").data(e),l=d3.svg.axis().scale(c).ticks(3).outerTickSize(0).orient("top");u.enter().append("g").attr("opacity",1e-6).attr("transform",function(e,t){return"translate(0,"+t*i+")"}).transition().attr("opacity",1),s.append("g").attr("class","x axis").attr("transform","translate(0,0)").call(l),u.append("rect").attr("width",0).transition().attr("width",function(e){return c(r(e))}).attr("height",i-25),u.append("text").attr("x",0).attr("y",i-17).attr("dy",".35em").text(function(e){return n(e)+" ("+r(e)+")"})};c(),u()}function parseResultForChart(e,t){var n=$(t).parents("div.api-explorer").find(".query").find("svg.chart");n[0]&&($(n[0]).show(),drawBarChart(e,n[0]))}function createAnchorsFromHeadings(){return $("h2, h3, h4, h5, h6").each(function(e,t){var n,r,a;return n=$(t),a=n.attr("id"),r='<i class="fa fa-link"></i>',a?n.append($("<a />").addClass("header-link").attr("href","#"+a).html(r)):void 0})}function createNavigationSidebarFromHeadings(){var e="",t=null;$("#reference :header").not(".noindex").each(function(){var n=$(this),r=this.tagName,a=r.substr(1,1),o=n.text(),i="#"+n.attr("id"),s="";if(null===t)s="";else if(a>t)s="<ul>";else if(t>a)for(var c=t-a,u=0;c>u;u++)s+="</ul></li>";else t===a&&(s="</li>");s+="<li><a href='"+i+"'>"+o+"</a>",e+=s,t=a}),$("#reference-nav-ul").prepend(e)}if(!library)var library={};library.json={replacer:function(e,t,n,r,a){var o="<span class=json-key>",i="<span class=json-value>",s="<span class=json-string>",c=t||"";return n&&(c=c+o+n.replace(/[": ]/g,"")+"</span>: "),r&&(c=c+('"'==r[0]?s:i)+r+"</span>"),c+(a||"")},prettyPrint:function(e){var t=/^( *)("[\w]+": )?("[^"]*"|[\w.+-]*)?([,[{])?$/gm;return JSON.stringify(e,null,3).replace(/&/g,"&amp;").replace(/\\"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(t,library.json.replacer)}},$(document).ready(function(){createNavigationSidebarFromHeadings(),createAnchorsFromHeadings(),$("textarea").autosize(),$(".reference-nav").affix({offset:{top:function(){return this.top=$(".reference-nav").offset().top-12}}}),$(".api-explorer button.go").click(function(){var e=$(this).parents(".api-explorer-form").find(".api-explorer-query").val(),t=$(this).parents("div.api-explorer").find(".return");$(this),$(t).find(".response pre").html("Loading request..."),$.getJSON(e,function(e){$(t).find(".response pre").html(library.json.prettyPrint(e)),$(t).parent().find(".response-close").remove(),$(t).find(".response pre").after('<button class="btn pull-left response-close">Close</button>'),$(t).height()>200&&$(t).find(".response pre").before('<button class="btn pull-left response-close">Close</button>'),$(".response-close").click(function(){$(this).parent().find("pre").html('Click "Run query" to see its results.'),$(this).parent().find(".response-close").remove()})}).fail(function(){$(t).find(".response pre").html("The API response was an error. Bummer. Check the syntax and give it another try.")})}),$(".api-explorer-query").keypress(function(e){var t=e.keyCode?e.keyCode:e.which,n=$(this).parents("div.api-explorer").find("button.go");32===t?e.preventDefault():13===t&&(e.preventDefault(),$(n).trigger("click"))})});